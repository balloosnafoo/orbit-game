<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>

    <script src="./vendor/keymaster.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>

    <script type="text/javascript" src="./util.js"></script>
    <script type="text/javascript" src="./moving-object.js"></script>
    <script type="text/javascript" src="./asteroid.js"></script>
    <script type="text/javascript" src="./cursor.js"></script>
    <script type="text/javascript" src="./planet.js"></script>
    <script type="text/javascript" src="./level-generator.js"></script>
    <script type="text/javascript" src="./game.js"></script>
    <script type="text/javascript" src="./game-view.js"></script>

    <link rel="stylesheet" href="./game.css" charset="utf-8">

  </head>
  <body>
    <!-- <h1>ORBIT GAME</h1> -->
    <h1 class="title">Orbit Game</h1>

    <div class="menu-button">
      Menu
    </div>

    <canvas id="game-canvas"></canvas>

    <div style="display:none;">
      <img id="earth" src="http://i.imgur.com/otF17Fi.png">
      <img id="moon" src="http://i.imgur.com/9L66AZe.png">
      <img id="green" src="http://i.imgur.com/Ko5HDJQ.png">
      <img id="red" src="http://i.imgur.com/JojoWco.png">
      <img id="purple" src="http://i.imgur.com/Y55SEy7.png">
    </div>

    <script type="application/javascript">
      var canvasEl = document.getElementById("game-canvas");
      var images = {
        earth:  document.getElementById('earth'),
        moon:   document.getElementById('moon'),
        green:  document.getElementById('green'),
        red:    document.getElementById('red'),
        purple: document.getElementById('purple')
      }

      canvasEl.width = 1700;
      canvasEl.height = 900;

      var ctx = canvasEl.getContext("2d");
      var game = new Asteroids.Game({
        images: images,
        width: canvasEl.width,
        height: canvasEl.height
      });

      new Asteroids.GameView({
        game: game,
        ctx: ctx,
        images: images
      }).start();
    </script>

    <script type="text/javascript">
      $(document).ready(function () {
        $('.menu-button').click(function () {
          placeModal();
        });

        var removeModal = function () {
          $('.m-background').remove();
          $('.m-content').remove();
        }

        var placeModal = function () {
          var modal = $('#instructions-template').html();
          $('body').append(modal);

          $('.earth-button').click(function () {
            removeModal();
          });

          $('.sandbox-button').click(function () {
            removeModal();
            game.removeAll();
          });

          $('.level-button').click(function () {
            game.removeAll();
            removeModal();
            game.levelGenerator.generateLevel("level1");
          });

          $('.m-background').click(function () {
            removeModal();
          });
        }

        placeModal();
      });
    </script>

    <script id="instructions-template" type="text/template">
      <div class="m-background"></div>

      <div class="m-content">
        <h1>Welcome to Orbit Game!</h1>
        <p>
          In this game you may create moons that are drawn to each other and to
          the planets on the map.
        </p>
        <h4>Controls:</h4>
        <ul>
          <li>Move cursor: 'wasd'</li>
          <li>increase/decrease cursor speed: 'c', 'v'</li>
          <li>Shrink/Enlargen object: '[', ']'</li>
          <li>In sandbox mode: </li>
          <ul>
            <li>Make an Earth: 'p'</li>
            <li>Make green/red planets: 'o', 'i'</li>
            <li>Make antigravity planets: 'u'</li>
          </ul>
        </ul>

        <p>
          Moons are made in three steps:
          <ul>
            <li>First: choose the origin of the moon and press 'enter'</li>
            <li>Second: move the cursor in the direction you want your moon to move</li>
            <li>Third: Press enter again. The distance between the two points determines the speed</li>
          </ul>
        </p>

        <div class="mode-selection button-group">
          <div class="button earth-button">
            Earth
          </div>
          <div class="button sandbox-button">
            Sandbox
          </div>
          <div class="button level-button">
            Levels
          </div>
        </div>
      </div>
    </script>
  </body>
</html>
